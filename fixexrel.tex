\documentclass[11pt]{amsart}
\usepackage[margin=1in, marginparwidth=0.8in]{geometry}
\usepackage[colorlinks,linkcolor=black!50!red,citecolor=blue,pdfpagemode=None]{hyperref}
\usepackage[capitalise]{cleveref}

\usepackage[draft]{say}
\newcommand{\saySS}[1]{\say[SS]{#1}}

% shorthands 
\newcommand{\cA}{\mathcal{A}}
\newcommand{\bC}{\mathbb{C}}
\newcommand{\cAb}{\mathcal{A}_\bullet}
\newcommand{\Supp}{\operatorname{Supp}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\bg}{\mathbf{g}}
\newcommand{\bc}{\mathbf{c}}
\newcommand{\bb}{\mathbf{b}}

% ambients and numbering
\newtheorem{theorem}{Theorem}[section]
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{example}[theorem]{Example}
\newtheorem{remark}[theorem]{Remark}
\numberwithin{equation}{section}

\begin{document}
\title[Exchange relations for finite type]{Exchange relations for finitie type cluster algebras with acyclic initial seed and principal coefficients}

\author[Felikson]{Anna Felikson}
\address[Anna Felikson]{Durham University}
\email{email-here}

\author[Reading]{Nathan Reading}
\address[Nathan Reading]{North Carolina State Univesity}
\email{email-here}

\author[Stella]{Salvatore Stella}
\address[Salvatore Stella]{IN$d$AM - Marie Curie Actions fellow, Universit\`a\`{ }La Sapienza'', Roma, Italy.}
\email{stella@mat.uniroma1.it}

\author[tumarkin]{Pavel Tumarkin}
\address[Pavel Tumarkin]{Durham University}
\email{email-here}

\begin{abstract}
We give an explicit description of all the exchange relations for finitie type cluster algebras with acyclic initial seed and principal coefficients.
\end{abstract}

\maketitle

\section{Introduction}
  In \cite{Ste13} the third author gave a formula for all the exchange relations in any finite type acyclic cluster algebra without coefficients.
  Our main theorem here improves on this result to include principal coefficients.
  
  \begin{theorem}
    \label{thm:main_vague}
    In any cluster algebra of finite type with principal coefficients at an acyclic initial seed, the coefficient appearing in the exchange relation of any two exchangeable cluster variables is \emph{explicitly} determined by their $\bg$-vectors. 
  \end{theorem}
  
  The claim in previous statement lays in the word ``explicitly''. 
  Indeed, since cluster variables are parametrized by their $\bg$-vectors, and since exchange relations are prescribed by the cluster variables involved, it is obvious that the $\bg$-vectors determines indirectly the coefficients. 
  This note is about giving precise formulas to compute them.
 
  In order to make \cref{thm:main_vague} more precise we need to recall few notions and results from \cite{Ste13,YZ08}.

  Let $A$ be any finite type \emph{Cartan matrix} and denote by $W=\langle s_1,\dots,s_n\rangle$ the associated \emph{Weyl group} and \emph{simple reflections}.
  To each \emph{Coxeter element} $c=s_{i_1}\cdots s_{i_n}$ in $W$ we can associate a skew-symmetrizable integer matrix $B_c=(b_{ij})_{i,j\in[1,n]}$ by setting
  \[
    b_{ij}=
    \begin{cases}
      -a_{ij} & \text{if } i\prec_c j  \\
      a_{ij}  & \text{if } j\prec_c i  \\
      0       & \text{otherwise}
    \end{cases}
  \]
  where we write $i\prec_c j$ if and only if $s_i$ precedes $s_j$ in all reduced expressions of $c$.
  As $c$ varies we get all the possible \emph{acyclic} exchange matrices in any cluster algebra of the same type as $A$.
  We will denote by $\cA(c)$ (resp. $\cA_0(c)$) the cluster algebra with initial exchange matrix $B_c$ and  \emph{principal} (resp. \emph{without}) \emph{coefficients} at the inital seed.

  The algebra $\cA(c)$ is $\ZZ^n$-graded; its cluster variables and cluster monomials are homogeneous elements and their \emph{$\bg$-vector} is their homogeneus degree.
  Let $\omega_i$ be the i-th \emph{fundamental weight} in the \emph{weight lattice} $P$ of $A$; we will routinely identify $\ZZ^n$ with $P$ by means of the basis of fundamental weights.
  We will therefore always consider $\bg$-vectors as elements of $P$.

  Let $w_0$ be the longest element of $W$ and denote by $h(i;c)$ the minimum positive integer such that 
  \[
    c^{h(i;c)}\omega_i = w_0\omega_i
  \]
  (it is a finite number \cite[Proposition 1.3]{YZ08}).
  \begin{theorem}[{\cite[Theorem 1.4]{YZ08}}]
    The cluster variables of $\cA(c)$ are naturally in bijection with the elements of the set
    \[
      \Pi(c)
      :=
      \left\{
        c^m\omega_i \, :\, i\in[1,n] \, , \, 0\leq m \leq h(i;c) 
      \right\}.
    \]
    To the cluster variable $x_\lambda$ it corresponds its $\bg$-vector $\lambda\in\Pi(c)$.
  \end{theorem}
  This correspondence extends to a bijection between points of $P$ and \emph{cluster monomials} of $\cA(c)$ (cf. \cite[Theorem 1.2]{Ste13}); for $\lambda\in P$ we will denote by $x_\lambda$ the cluster monomial whose $\bg$-vector is $\lambda$.
  In view of the ``separation of additions formula'' we get a similar bijection with cluster monomials in $\cA_0(c)$; we will freely refer to either of the two according to our needs.

  The set $\Pi(c)$ is naturally endowed with a permutation $\tau_c$ defined by
  \[
    \tau_c (\lambda) 
    :=
    \begin{cases}
      \omega_i  & \text{if $\lambda = -\omega_i$} \\
      c\lambda  & \text{otherwise}
    \end{cases}
  \]
  which extends to a piecewise linear map on the whole of $P$ compatible with the cluster structure of $\cA(c)$.
  This is a combinatorial shadow of a notable automorphism of $\cA_0(c)$ sending $x_\lambda$ to $x_{\tau_c(\lambda)}$. 

  Let $Q$ be the \emph{root lattice} of $A$ with simple roots $\alpha_i$; as for $P$, we will identify $Q$ and $\ZZ^n$ using the basis of simple roots.
  \begin{definition}
    The \emph{compatibility degree} $(\bullet||\bullet)_c$ is the unique $\tau_c$-invariant function on pairs of elements of $\Pi(c)$ defined by the initial conditions
    \[
      (\omega_i||\lambda)_c
      :=
      \left[ (c^{-1}-1)\lambda ; \alpha_i\right]_+
    \]
    where $[v,\alpha_i]$ is the coefficient of $\alpha_i$ in $v$ expressed in the basis of simple roots and $[m]_+$  denotes $\max\{m, 0\}$ (cf. \cite[Proposition 5.1]{YZ08}).
  \end{definition}
  The name comes from the following important property.
  \begin{proposition}
    Two weights $\lambda$ and $\mu$ from $\Pi(c)$ are
    \begin{itemize}
      \item
        \emph{compatible} (i.e. there is a cluster of $\cA(c)$ containing both $x_\lambda$ and $x_\mu$) if and only if
        \[
          (\lambda||\mu)_c = 0
          \quad \quad
          \text{(equivalently $(\mu||\lambda)_c=0$)}
        \]

      \item
        \emph{exchangeable} (i.e. there are two clusters of $\cA(c)$ that can be obtained from one-another by swapping $x_\lambda$ for $x_\mu$) if and only if
        \[
          (\lambda||\mu)_c = 1 = (\mu||\lambda)_c
        \]
    \end{itemize}
  \end{proposition}

  Our starting point is the following restatement of \cite[Propositions 5.1 and 5.2]{Ste13}. 
  \begin{proposition}
    Suppose $\lambda$ and $\mu$ are exchangeable weights in $\Pi(c)$. 
    Then the set
    \[
      \left\{
        \tau_c^{-m}\left(\tau_c^m(\lambda)+\tau_c^m(\mu)\right)
      \right\}_{m\in\ZZ}
    \]
    consists precisely of two elements. One of them is $\lambda+\mu$; denote the other by $\lambda\uplus_c\mu$.

    The exchange relation of $x_\lambda$ and $x_\mu$ in $\cA_0(c)$ is then
    \[
      x_\lambda x_\mu = x_{\lambda+\mu} + x_{\lambda\uplus_c\mu}.
    \]
  \end{proposition}

  Denote by $y_1,\dots,y_n$ the generators of the coefficient semifield of $\cA(c)$ and by $y^\alpha$ the product $\prod_{i=1}^n y_i^{[\alpha;\alpha_i]}$.
  In view of \cite{NS14}, taking into account that the exchange relations in $\cA(c)$ are homogeneous, we get the following straigthforward corollary.
  \begin{corollary}
    The exchange relations in $\cA(c)$ are all of the form 
    \[
      x_\lambda x_\mu = x_{\lambda+\mu} + y^\alpha x_{\lambda\uplus_c\mu}
    \]
    for some exchangeable weights $\lambda$ and $\mu$ and some positive root $\alpha$.
  \end{corollary}

  We can finally recast \cref{thm:main_vague} into a more precise statement.
  \begin{theorem}
    \label{thm:main}
    Let $\lambda$ and $\mu$ be exchangeable weights. 
    Then the exponent $\alpha$ in the exchange relation
    \[
      x_\lambda x_\mu = x_{\lambda+\mu} + y^\alpha x_{\lambda\uplus_c\mu}
    \]
    is the unique positive root satisfying both
    \saySS{Check signs here}
    \begin{equation}
      \label{eq:system}
      -B_c\alpha = \lambda+\mu-\lambda\uplus_c\mu
    \end{equation}
    and
    \begin{equation}
      \label{eq:dual}
      \lambda(\alpha^\vee) \mu(\alpha^\vee) = -1
    \end{equation}
    where $\alpha^\vee$ is the \emph{coroot} corresponding to $\alpha$.
  \end{theorem}
  Observe that the two conditions of the theorem are necessary. 
  Indeed \cref{eq:system} is just a restatement of the fact that the exchange relations in $\cA(c)$ are homogeneous and that the degree of $y_i$ is $-\bb_i$ (the negative of the i-th column of $B_c$).
  \cref{eq:dual}, instead, follows immediately from \cite[Eq. (1.11)]{NZ11} once we interpret $\bg$-vectors as weights and $\bc$-vectors as roots together with the observation that, mutating in direction $k$, the $k$-th $\bc$-vector changes into its negative.
  
  On the other hand \cref{eq:system} is not, in principle, sufficient on its own because $B_c$ is, in general, not invertible.
  None the less, thanks to the fact that we are dealing with positive roots, we will see that it is still enough in every case except in type $D_n$.
  
  
\section{Proof of \cref{thm:main}}
  Recall the notation for $A$, $c$ and $B_c$ from the introduction.
  We assume that the nodes of the Dynkin diagram of $A$ are labeled with the standard convention.
  \saySS{Add appropriate reference here. Kac? Bourbaki?}
  We begin our analisys with a well known consideration on the rank of $B_c$ 
  
  \begin{lemma}
    If the type of $A$ is not $D_n$, then the kernel of $B_c$ has dimension $0$ if $n$ is even and $1$ if $n$ is odd.
    If the type of $A$ is $D_n$, then the kernel of $B_c$ has dimension $2$ if $n$ is even and $1$ if $n$ is odd.
  \end{lemma}
  \begin{proof}
    The rank of $B_c$ is invariant under mutation so it suffices to establish the property for a single choice of $c$. 
    Let then $c=s_1\cdots s_n$ so that $B_c$ has positive entries above the diagonal.
    Exeptional types could be dealt uniformly in the argument at the expense of an heavier notation. 
    We prefer to check the lemma by direct inspection.

    Assume at first that the type of $A$ is not $D_n$.
    When $n$ is even, the matrix $B_c$ is invertible. 
    Indeed, expanding by the first column and then by the first row, we get:
    \[
      \det(B_c)=-\det(B_c')
    \]
    where $B_c'$ is a $(n-2)\times(n-2)$ matrix in the same infinite class of $B_c$. 
    The result follows then immediately by induction because all $2\times2$ skew-symmetrizable matrices are invertible.
    The same argument, with $n=3$ as base of the induction, shows that when $n$ is odd $\det(B_c)=0$.
    Combining the two assertions we get that, for odd $n$, the dimension of the kernel of $B_c$ is $1$.

    To get the result in type $D_n$ it is enough to observe that the last two rows (and columns) of $B_c$ are identical. 
    We deduce therefore the required property from type $A_{n-1}$.
  \end{proof}
  This establishes \cref{thm:main} whenever $n$ is even and the type of $A$ is not $D_n$.
  To deal with the remaining cases we compute explicit generators for the kernel of $B_c$.

  \begin{lemma}
    Let $A$ be of type different from $D_n$ and let $n=2k+1$.
    Then the kernel of $B_c$ is generated by a vector with exactly $k+1$ connected components.
  \end{lemma}

  \begin{lemma}
    \label{lem:ker_Dn_even}
    Let $A$ be of type $D_n$ with $n$ odd.
    Then the kernel of $B_c$ is generated by $\alpha_{n-1}+\alpha_n$ if $(n-1) \prec_c (n-2) \prec_c n$ or $n \prec_c (n-2) \prec_c (n-1)$.
    Otherwise it is generated by $\alpha_{n-1}-\alpha_n$.
  \end{lemma}

  \begin{lemma}
    Let $A$ be of type $D_n$ with $n=2k$ and $n\geq 6$.
    Then the kernel of $B_c$ is generated by a vector with exactly $k$ connected components togeter with one of the two vectors $\alpha_{n-1}\pm\alpha_n$ according to the same prescriptions of \cref{lem:ker_Dn_even}.
  \end{lemma}

  \begin{lemma}
    The difference of two roots has at most 2 connected components.
  \end{lemma}

  \begin{corollary}
    If the type of $A$ is not $D_n$ and $n\geq 4$ \cref{eq:system} has a unique solution among the positive roots of $A$.
  \end{corollary}

  \begin{corollary}
    Suppose the type of $A$ is $D_n$ and $n\geq 5$. 
    If \cref{eq:system} has more then one solution among the positive roots of $A$ than it has precisely two.
    Their difference is in the span of either $\alpha_{n-1}\pm\alpha_n$ depending on the relative order of $s_{n-2}$,$s_{n-1}$, and $s_n$ in $c$.
  \end{corollary}

  There remain to consider the cases when $A$ is of type $A_3$, $B_3$, $C_3$ and $D_4$.
  But \cref{thm:main} can be verified by direct inspection in these small examples.

  Let $V$ be the $n$-dimensional real vector space containing the root system of $A$.
  We always write vectors in $V$ in the basis of simple roots $\alpha_i$.
  The \emph{support} of $v\in V$ is the subset $\Supp(v)\subseteq [1,n]$ consisting of all the indices of nonzero coordinates of $v$.
  Such a subset induces a full subdiagram of the Dynkin diagram of $A$; when we talk about the \emph{connected components} of $\Supp(v)$ we refer to the connected components of this subdiagram.

% bibliography
\bibliographystyle{amsalpha}
\bibliography{bibliography}

\end{document}
